<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
        }
        .test-area {
            margin: 20px 0;
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 10px;
            background: #f9f9f9;
        }
        .input-field {
            width: 100%;
            padding: 15px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin: 10px 0;
        }
        .contenteditable {
            min-height: 100px;
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background: white;
            outline: none;
        }
        .contenteditable:focus {
            border-color: #007bff;
        }
        .status {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        .safe {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .malicious {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        .instructions {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>üß™ Typing Test - AI Misuse Detection</h1>
    
    <div class="instructions">
        <h3>üìù Instructions:</h3>
        <p><strong>Test Case 1:</strong> Type "how to kill mosquitos" slowly - it should NOT clear until you finish typing</p>
        <p><strong>Test Case 2:</strong> Type "how to kill a person" - it should clear when you finish</p>
        <p><strong>Test Case 3:</strong> Type "what is a deepfake" - it should remain safe</p>
    </div>
    
    <div class="test-area">
        <h3>Regular Input Field Test:</h3>
        <input type="text" id="regularInput" class="input-field" placeholder="Type here to test...">
        <div id="regularStatus" class="status info">Ready to test...</div>
    </div>
    
    <div class="test-area">
        <h3>Contenteditable Test (like ChatGPT):</h3>
        <div id="contentEditable" class="contenteditable" contenteditable="true" placeholder="Type here to test..."></div>
        <div id="editableStatus" class="status info">Ready to test...</div>
    </div>
    
    <div class="test-area">
        <h3>Textarea Test:</h3>
        <textarea id="textareaInput" class="input-field" rows="4" placeholder="Type here to test..."></textarea>
        <div id="textareaStatus" class="status info">Ready to test...</div>
    </div>

    <script>
        // Track typing for each input
        let typingTimeouts = {};
        
        function updateStatus(element, statusId, text) {
            const statusElement = document.getElementById(statusId);
            const lowerText = text.toLowerCase();
            
            // Check for obvious patterns
            if (text.length < 15) {
                statusElement.className = 'status info';
                statusElement.textContent = `Typing... (${text.length} chars) - Too short for analysis`;
                return;
            }
            
            // Check for safe patterns
            if (lowerText.includes('mosquitos') || lowerText.includes('bugs') || lowerText.includes('time')) {
                statusElement.className = 'status safe';
                statusElement.textContent = `‚úÖ SAFE: "${text}" - Harmless target detected`;
                return;
            }
            
            // Check for malicious patterns
            if (lowerText.includes('how to kill a person') || lowerText.includes('how to murder')) {
                statusElement.className = 'status malicious';
                statusElement.textContent = `üö´ MALICIOUS: "${text}" - Harmful content detected`;
                return;
            }
            
            // Check for educational patterns
            if (lowerText.includes('what is') || lowerText.includes('why do')) {
                statusElement.className = 'status safe';
                statusElement.textContent = `‚úÖ SAFE: "${text}" - Educational question`;
                return;
            }
            
            // Default status
            statusElement.className = 'status info';
            statusElement.textContent = `Analyzing: "${text}"`;
        }
        
        function handleInput(element, statusId) {
            const text = element.value || element.textContent || '';
            
            // Clear previous timeout
            if (typingTimeouts[statusId]) {
                clearTimeout(typingTimeouts[statusId]);
            }
            
            // Set new timeout for status update
            typingTimeouts[statusId] = setTimeout(() => {
                updateStatus(element, statusId, text);
            }, 300);
        }
        
        // Set up event listeners
        document.getElementById('regularInput').addEventListener('input', function() {
            handleInput(this, 'regularStatus');
        });
        
        document.getElementById('contentEditable').addEventListener('input', function() {
            handleInput(this, 'editableStatus');
        });
        
        document.getElementById('textareaInput').addEventListener('input', function() {
            handleInput(this, 'textareaStatus');
        });
        
        // Test if extension is available
        if (typeof chrome !== 'undefined' && chrome.runtime) {
            chrome.runtime.sendMessage({action: 'test', message: 'Typing test page loaded'}, function(response) {
                if (response) {
                    console.log('Extension is working:', response);
                } else {
                    console.log('Extension not responding');
                }
            });
        } else {
            console.log('Chrome extension API not available');
        }
    </script>
</body>
</html>


